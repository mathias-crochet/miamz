var __BUNDLE_START_TIME__=globalThis.nativePerformanceNow?nativePerformanceNow():Date.now(),__DEV__=false,process=globalThis.process||{},__METRO_GLOBAL_PREFIX__='';
!(function(e){"use strict";e.__r=i,e[`${__METRO_GLOBAL_PREFIX__}__d`]=function(e,n,o){if(t.has(n))return;const i={dependencyMap:o,factory:e,hasError:!1,importedAll:r,importedDefault:r,isInitialized:!1,publicModule:{exports:{}}};t.set(n,i)},e.__c=o,e.__registerSegment=function(e,r,n){p[e]=r,n&&n.forEach(r=>{t.has(r)||h.has(r)||h.set(r,e)})};var t=o();const r={},{hasOwnProperty:n}={};function o(){return t=new Map}function i(e){const r=e,n=t.get(r);return n&&n.isInitialized?n.publicModule.exports:d(r,n)}function l(e){const n=e,o=t.get(n);if(o&&o.importedDefault!==r)return o.importedDefault;const l=i(n),u=l&&l.__esModule?l.default:l;return t.get(n).importedDefault=u}function u(e){const o=e,l=t.get(o);if(l&&l.importedAll!==r)return l.importedAll;const u=i(o);let c;if(u&&u.__esModule)c=u;else{if(c={},u)for(const e in u)n.call(u,e)&&(c[e]=u[e]);c.default=u}return t.get(o).importedAll=c}i.importDefault=l,i.importAll=u,i.context=function(){throw new Error("The experimental Metro feature `require.context` is not enabled in your project.")},i.resolveWeak=function(){throw new Error("require.resolveWeak cannot be called dynamically.")};let c=!1;function d(t,r){if(!c&&e.ErrorUtils){let n;c=!0;try{n=g(t,r)}catch(t){e.ErrorUtils.reportFatalError(t)}return c=!1,n}return g(t,r)}const a=16,s=65535;function f(e){return{segmentId:e>>>a,localId:e&s}}i.unpackModuleId=f,i.packModuleId=function(e){return(e.segmentId<<a)+e.localId};const p=[],h=new Map;function g(r,n){if(!n&&p.length>0){const e=h.get(r)??0,o=p[e];null!=o&&(o(r),n=t.get(r),h.delete(r))}const o=e.nativeRequire;if(!n&&o){const{segmentId:e,localId:i}=f(r);o(i,e),n=t.get(r)}if(!n)throw _(r);if(n.hasError)throw n.error;n.isInitialized=!0;const{factory:c,dependencyMap:d}=n;try{const t=n.publicModule;return t.id=r,c(e,i,l,u,t,t.exports,d),n.factory=void 0,n.dependencyMap=void 0,t.exports}catch(e){throw n.hasError=!0,n.error=e,n.isInitialized=!1,n.publicModule.exports=void 0,e}}function _(e){return Error('Requiring unknown module "'+e+'".')}})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
!(function(e){e.$$require_external="undefined"!=typeof require?require:()=>null})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window&&window;
!(function(r){let l=0,n=!0===r.RN$useAlwaysAvailableJSErrorHandling?r.RN$handleException:(r,l)=>{throw r};const t={setGlobalHandler(r){n=r},getGlobalHandler:()=>n,reportError(r){n&&n(r,!1)},reportFatalError(r){n&&n(r,!0)},applyWithGuard(r,n,e,a,o){try{return l++,r.apply(n,e)}catch(r){t.reportError(r)}finally{l--}return null},applyWithGuardIfNeeded:(r,l,n)=>t.inGuard()?r.apply(l,n):(t.applyWithGuard(r,l,n),null),inGuard:()=>!!l,guard(r,l,n){if('function'!=typeof r)return console.warn('A function must be passed to ErrorUtils.guard, got ',r),null;const e=l??r.name??'<generated guard>';return function(...l){return t.applyWithGuard(r,n??this,l,null,e)}}};r.ErrorUtils=t})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
__d(function(g,r,i,a,m,e,d){function n(n){const o=['nourriture','l\xe9gume','fruit','viande','produit laitier','pain','fromage','tomate','laitue','carotte','oignon','pomme de terre','pomme','banane','poulet','b\u0153uf','poisson','lait','\u0153uf','riz','p\xe2tes','brocoli','poivron','concombre','\xe9pinard','champignon','ail','citron','orange','fraise','avocat','haricots','ma\xefs','petits pois','noix','yaourt','beurre','huile','herbes','\xe9pices','sauce','condiment'],t=new Set;return n.responses?.[0]?.labelAnnotations&&n.responses[0].labelAnnotations.forEach(n=>{const s=n.description.toLowerCase();o.some(n=>s.includes(n))&&t.add(s)}),n.responses?.[0]?.localizedObjectAnnotations&&n.responses[0].localizedObjectAnnotations.forEach(n=>{const s=n.name.toLowerCase();o.some(n=>s.includes(n))&&t.add(s)}),Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.POST=async function(o){try{const{image:t,apiKey:s}=await o.json();if(!t||!s)return new Response(JSON.stringify({error:'Image ou cl\xe9 API manquante'}),{status:400,headers:{'Content-Type':'application/json'}});const c=`https://vision.googleapis.com/v1/images:annotate?key=${s}`,p={requests:[{image:{content:t},features:[{type:'LABEL_DETECTION',maxResults:20},{type:'OBJECT_LOCALIZATION',maxResults:20}]}]},u=await fetch(c,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(p)});if(!u.ok)throw new Error(`Erreur API Vision: ${u.status}`);const l=await u.json(),f=n(l);return new Response(JSON.stringify({success:!0,detectedItems:f,rawData:l}),{status:200,headers:{'Content-Type':'application/json'}})}catch(n){return console.error('Erreur API Vision:',n),new Response(JSON.stringify({error:'\xc9chec de l\'analyse de l\'image',details:n instanceof Error?n.message:'Erreur inconnue'}),{status:500,headers:{'Content-Type':'application/json'}})}}},4022,[]);
module.exports = __r(4022);